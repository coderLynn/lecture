Fengs.add("common/base-require",function(e,r,n,t){var a=["sign","signpass","signpayment"],o=window,u=document,s="getElementsByTagName",i="createElement",c="push",p="split",l="removeChild",f="getTime",m="getTime",d="String",g="replace",v="toString",y="length",h="Array",T="Object",w="cookie",S="prefix",M="send",b="parseInt",A="getFullYear",C="getMonth",j="getDate",U="getHours",x="getMinutes",O="getSeconds",P="ActiveXObject",_="XMLHttpRequest",E="toUpperCase",R="join",D="Date",H="status",J="getMilliseconds",E="toUpperCase",q="success",I="appendChild",N="jsonpHost",X="emnu",L="jsonp",k="data",B=function(n,B,F,K){n=n===K?50:n,B=B===K?"ZX_KEHUDA_":B;var $={url:F===K?e.remote.api[0]:F,b:!1,p:function(e,r){return $[M](e,1,r)},s:function(e,r){return $[M](e,0,r)},m:function(e,r){return $[M](e,2,r)},pay:function(e){return t(e+"#@$*)!")},pass:function(e){return t(e+",vs/..~")},loadJs:function(e,r,n){var t=u[i]("script"),a=!1;t.type="text/javascript",t.src=e,t.onload=function(){a=!0,u[s]("head")[0][l](t)},n&&(t.onerror=n),u[s]("head")[0][I](t)},get:function(e,n,t,u){var s,i,c,p=r.extend({url:"",host:"/",type:"POST",dataType:"JSON",data:{},escape:!0,success:function(){},p:null,error:function(){}},e);p[k]=$[g](p[k]),p[k].timestamp=n,1==t?p.p=p.p?p.p:r[w]($[S]+"PASS"):2==t&&(c="SUDUDA_COM_"+p[k].username[E](),p[k].cert=r[w](c+"_CERT"));var l=$.sort(p[k],p.escape);p.url=p.url[g](/^\//,""),p[k]=l[0],i="/"+p.url+"?"+$.emnu(l[1],p[k].sign0)[R]("&"),s=md5(encodeURIComponent(0!=t?i+"&"+p.p:i));var f=a[t];return p[k][f]=s,u?i+"&"+f+"="+s:"/"!==p.host&&r.browser&&r.browser.msie&&r.browser.version<="9.0"?$.xhr(p.host+p.url,$.emnu(l[1],p[k].sign0)[R]("&")+"&"+f+"="+s,p):r.ajax({url:p.host+p.url,type:p.type,dataType:p.dataType[r===o.jquery?E:"toLowerCase"](),data:p[k],success:function(r){try{var n=r.sududa;if(-9==n[H]&&n.tips[m]("时间戳已过期")>=0)return $.syscTime(function(){$[M](e,t)})}catch(a){return p[q](r)}return-1===r[H]&&p.login?p.login():void p[q](r)},error:p.error})},xhr:function(e,n,t){var a=!1,u=t.type[E]();try{a=new o[P]("Msxml2.XMLHTTP")}catch(s){try{a=new o[P]("Microsoft.XMLHTTP")}catch(i){a=!1}}return a||"undefined"==typeof o[_]||(a=new o[_]),a.onreadystatechange=function(){if(4==a.readyState){var e=a[H];if(e>=200&&300>e){var n=a.responseText;if("JSON"===t.dataType[E]()){try{n=r.parseJSON(n)}catch(o){n={}}t[q]&&t[q](n)}else t[q]&&t[q](n)}else t.error&&t.error()}},a.open(u,e,!0),"POST"==u&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a[M](n),a},sort:function(e,r){var n,t,a=new o[h],u=new o[h],s=new o[T],i=new o[T];for(var c in e)r?(n=o[d](e[c])[g](/\)/g,"）")[g](/\(/g,"（")[g](/\{/g,"｛")[g](/\}/g,"｝")[g](/\\/g,"＼")[g](/\</g,"＜")[g](/\>/g,"＞")[g](/\'/g,"＇")[g](/\!/g,"！")[g](/\~/g,"～")[g](/\ /g,"　")[g](/\%/g,"　")[g](/\ /g,"　"),t=n[g](/%/g,"%25")[g](/\+/g,"%2B")[g](/&/g,"%26")):t=n=o[d](e[c]),u.push({name:c,value:n}),a.push({name:c,value:t});a.sort(function(e,r){return e.name<r.name?-1:1}),u.sort(function(e,r){return e.name<r.name?-1:1});for(var c=0;c<a[y];c++)s[a[c].name]=a[c].value,i[u[c].name]=u[c].value;return[s,i]},syscTime:function(e){var n=(new o[D])[f]();$.s({url:"/api/sys_now",type:L,data:{format:"json",rnd:n},success:function(t){t=t.sududa;var a=0;"1"==t[H]&&(a=o[b](n/1e3)-t.time),r[w]($[S]+"TIMESTAMP",a,{path:"/"}),e()}})},getid:function(){var e=new o[D],r={y:o[d](e[A]()),M:o[d](e[C]()+1),d:o[d](e[j]()),h:o[d](e[U]()),m:o[d](e[x]()),s:o[d](e[O]())};for(var n in r)1==r[n][y]&&(r[n]="0"+r[n]);r.t=o[d](e[J]());for(var n=0;n<3-r.t[y];n++)r.t="0"+r.t;return r.y+r.M+r.d+r.h+r.m+r.s+r.t},covertArray:function(e){return e&&""!=e?r.isArray(e)?e:[e]:[]}};return $[L]=function(e,n,t){var u,s,i,c=r.extend({url:"",data:null,escape:!0,success:function(){},p:null,error:function(){}},e),p="JSONP"+(new o[D])[f]()[v](36);c[k].callback=p,o[p]=function(r){try{var n=r.sududa;if(-9==n[H]&&n.tips[m]("时间戳已过期")>=0)return $.syscTime(function(){$[M](e,t)})}catch(a){return c[q](r)}return-1===r[H]&&c.login?c.login():void c[q](r)},c[k]=$[g](c[k]),c[k].timestamp=n,1==t?c.p=c.p?c.p:r[w]($[S]+"PASS"):2==t&&(i="SUDUDA_COM_"+c[k].username.toUpperCase(),c[k].cert=r[w](i+"_CERT")),c.url=c.url[g](/^\//,"");var l=$.sort(c[k],c.escape);c[k]=l[0],s="/"+c.url+"?"+$.emnu(l[1],c[k].sign0).join("&"),u=md5(encodeURIComponent(0!=t?s+"&"+c.p:s));var d=a[t];c[k][d]=u,$.loadJs($[N][g](/\/$/,"")+s+"&"+d+"="+u,function(){},c.error)},$[S]=B,$[N]=e.remote.api[0],$[X]=function(e,n){var t=new o[h],a=n&&"string"==typeof n?n[p](","):!1;for(var u in e)a&&r.inArray(u,a)>=0||t[c](u+"="+e[u]);return t},$[g]=function(e){if(e.client=n,e.format||(e.format="json"),e.ver="4",!e.username){var t=r[w]($[S]+"USER");null===t&&(t=r[w]($[S]+"MARK")),null===t&&(t="null"),e.username=t}return e},$[M]=function(e,n,t){{var a=o[b]((new o[D])[f]()/1e3);arguments.callee}try{$.b=o[b](r[w]($[S]+"TIMESTAMP")),$.b=$.b?$.b:0}catch(u){$.b=0}return $[e.type===L?L:"get"](e,a-$.b,n,t)},$};return B},["jquery/cookie","./md5"]);