Fengs.add("common/formcheck",function(e,t){var n=function(n,r){r=t.extend({cb:function(e,t,n){if(!t){var r=e.parent().find(".err-tips");0==r.length?e.parent().addClass("error").append('<div class="err-tips">'+n+"</div>"):r.text(n)}},reset:function(e){e.parent().removeClass("error").find(".err-tips").remove()},regs:{}},r);var a=n.eq?!1:!0,s={},c=a?n:t("[data-check]",n),l=c.length,o=0,i=function(e,t){return r.cb(e,t.s,t.t),e.one("click",function(){r.reset(e)}),t},m=function(t){var n=t.data("check"),a=(t.parents(".control-group"),t[0].type),c="select-one"==a||"checkbox"==a,l=t.val();return s[t.attr("id")]={name:n.name,val:l},n.empty||""!=l&&("checkbox"!=a||t[0].checked)?0==!n.length&&""!=l&&"string"==typeof n.length&&null!==n.length.match(/^[\d]+\-[\d]+$/)&&(n.length==n.length.split("-"),l.length>n.length[1]||l.length<n.length[0])?i(t,{s:!1,t:n.name+"长度限制为"+n.length+"位"}):0!=!n.type||""==l||(!r.regs[n.type]||r.regs[n.type].test(l))&&e.test(l,n.type)?0==!n.same&&s[n.same]&&s[n.same].val!=l?i(t,{s:!1,t:"与"+s[n.same].name+"不一致"}):i(t,{s:!0}):i(t,{s:!1,t:n.name+"格式错误"}):i(t,{s:!1,t:c?"请选择"+n.name:n.name+"不允许为空"})};if(0==l)return{status:!0,tips:"没有验证的表单"};for(var h=0;l>h;h++){var p=a?c[h]:c.eq(h),g=m(p);g.s===!1&&o++}return{status:0==o?!0:!1}};return n},["common/utils"]);