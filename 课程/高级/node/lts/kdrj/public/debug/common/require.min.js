Fengs.add("common/require",function(e,t,r,n){var a=["sign","signpass","signpayment"],s={url:e.remote.api[0],prefix:"ZX_KEHUDA_",jsonpHost:e.remote.api[0],b:!1,emnu:function(e){var t=new Array;for(var r in e)t.push(r+"="+e[r]);return t},pay:function(e){return n(e+"#@$*)!")},pass:function(e){return n(e+",vs/..~")},loadJs:function(e,t,r){var n=document.createElement("script"),a=!1;n.type="text/javascript",n.src=e,n.onload=function(){a=!0,document.getElementsByTagName("head")[0].removeChild(n)},r&&(n.onerror=r),document.getElementsByTagName("head")[0].appendChild(n)},replace:function(t){return t.client=50,t.format||(t.format="json"),t.ver="4",t.username||(t.username=e.logined&&e.logined.u?e.logined.u:""),t},get:function(e,r,n,o){var c,u,i,p=t.extend({url:"",host:"/",type:"POST",dataType:"JSON",data:null,escape:!0,success:function(){},p:null,error:function(){}},e);p.data=s.replace(p.data),p.data.timestamp=r,1==n?p.p=p.p?p.p:t.cookie(s.prefix+"PASS"):2==n&&(i="SUDUDA_COM_"+p.data.username.toUpperCase(),p.data.cert=t.cookie(i+"_CERT")),p.username||(p.username=t.cookie(s.prefix+"USER"));var d=s.sort(p.data,p.escape);p.url=p.url.replace(/^\//,""),p.data=d[0],u="/"+p.url+"?"+s.emnu(d[1]).join("&"),c=md5(encodeURIComponent(0!=n?u+"&"+p.p:u));var l=a[n];return p.data[l]=c,o?u+"&"+l+"="+c:"/"!==p.host&&t.browser.msie&&t.browser.version<="9.0"?s.xhr(p.host+p.url,s.emnu(d[1]).join("&")+"&"+l+"="+c,p):t.ajax({url:p.host+p.url,type:p.type,dataType:p.dataType[t===window.jquery?"toUpperCase":"toLowerCase"](),data:p.data,success:function(t){try{var r=t.sududa;if(-9==r.status&&r.tips.indexOf("时间戳已过期")>=0)return s.syscTime(function(){s.send(e,n)})}catch(a){}p.success(t)},error:p.error})},send:function(e,r,n){{var a=parseInt((new Date).getTime()/1e3);arguments.callee}try{s.b=parseInt(t.cookie(s.prefix+"TIMESTAMP")),s.b=s.b?s.b:0}catch(o){s.b=0}return this["jsonp"==e.type?"jsonp":"get"](e,a-s.b,r,n)},xhr:function(e,r,n){var a=!1,s=n.type.toUpperCase();try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(o){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){a=!1}}return a||"undefined"==typeof XMLHttpRequest||(a=new XMLHttpRequest),a.onreadystatechange=function(){if(4==a.readyState){var e=a.status;if(e>=200&&300>e){var r=a.responseText;if("JSON"===n.dataType.toUpperCase()){try{r=t.parseJSON(r)}catch(s){r={}}n.success&&n.success(r)}else n.success&&n.success(r)}else n.error&&n.error()}},a.open(s,e,!0),"POST"==s&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(r),a},jsonp:function(e,r,n){var o,c,u,i=t.extend({url:"",data:null,escape:!0,success:function(){},p:null,error:function(){}},e),p="JSONP"+(new Date).getTime().toString(36);i.data.callback=p,window[p]=function(t){try{var r=t.sududa;if(-9==r.status&&r.tips.indexOf("时间戳已过期")>=0)return s.syscTime(function(){s.send(e,n)})}catch(a){}i.success(t)},i.data=s.replace(i.data),i.data.timestamp=r,1==n?i.p=i.p?i.p:t.cookie(s.prefix+"PASS"):2==n&&(u="SUDUDA_COM_"+i.data.username.toUpperCase(),i.data.cert=t.cookie(u+"_CERT")),i.url=i.url.replace(/^\//,"");var d=s.sort(i.data,i.escape);i.data=d[0],c="/"+i.url+"?"+s.emnu(d[1]).join("&"),o=md5(encodeURIComponent(0!=n?c+"&"+i.p:c));var l=a[n];i.data[l]=o,s.loadJs(s.jsonpHost.replace(/\/$/,"")+c+"&"+l+"="+o,function(){},i.error)},p:function(e,t){return this.send(e,1,t)},s:function(e,t){return this.send(e,0,t)},m:function(e,t){return this.send(e,2,t)},sort:function(e,t){var r,n,a=new Array,s=new Array,o=new Object,c=new Object;for(var u in e)t?(r=String(e[u]).replace(/\)/g,"）").replace(/\(/g,"（").replace(/\{/g,"｛").replace(/\}/g,"｝").replace(/\\/g,"＼").replace(/\</g,"＜").replace(/\>/g,"＞").replace(/\'/g,"＇").replace(/\!/g,"！").replace(/\~/g,"～").replace(/\ /g,"　"),n=r.replace(/\%/g,"%25").replace(/\+/g,"%2B").replace(/\&/g,"%26")):n=r=String(e[u]),e.sign0!==u&&(s.push({name:u,value:r}),a.push({name:u,value:n}));a.sort(function(e,t){return e.name<t.name?-1:1}),s.sort(function(e,t){return e.name<t.name?-1:1});for(var u=0;u<a.length;u++)o[a[u].name]=a[u].value,c[s[u].name]=s[u].value;return[o,c]},pay:function(e){return md5(e+"#@$*)!")},syscTime:function(e){var r=(new Date).getTime();s.s({url:"/api/sys_now",type:"jsonp",data:{format:"json",rnd:r},success:function(n){n=n.sududa;var a=0;"1"==n.status&&(a=parseInt(r/1e3)-n.time),t.cookie(s.prefix+"TIMESTAMP",a,{path:"/"}),e()}})},getid:function(){var e=new Date,t={y:String(e.getFullYear()),M:String(e.getMonth()+1),d:String(e.getDate()),h:String(e.getHours()),m:String(e.getMinutes()),s:String(e.getSeconds())};for(var r in t)1==t[r].length&&(t[r]="0"+t[r]);t.t=String(e.getMilliseconds());for(var r=0;r<3-t.t.length;r++)t.t="0"+t.t;return t.y+t.M+t.d+t.h+t.m+t.s+t.t},covertArray:function(e){return e&&""!=e?t.isArray(e)?e:[e]:[]}};return s},["jquery/cookie","./md5"]);