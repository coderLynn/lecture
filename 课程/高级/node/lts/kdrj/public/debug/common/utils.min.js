Fengs.add("common/utils",function(e,t){e.jsonToStr||(e.jsonToStr=function(e){var t=[],o=arguments.callee,n=function(e){return"object"==typeof e&&null!=e?o(e):/^(string|number)$/.test(typeof e)?'"'+e+'"':e};if("[object Array]"===Object.prototype.toString.call(e)){for(var a in e)t.push(n(e[a]));return"["+t.join(",")+"]"}for(var a in e)t.push('"'+a+'":'+n(e[a]));return"{"+t.join(",")+"}"},e.parseUri=function(e,t){if(!e)return{};t=t||"?";var o,n="?"==t?"#":"?",a={};if(t=e.indexOf(t),n=e.indexOf(n),t>=0){t++,e=e.substr(t,n>t?n-t:e.length),e=e.split("&");for(var r=0;r<e.length;r++)try{o=e[r].split("="),a[o[0]]=o[1]}catch(c){}}return a},e.moveDrop=function(e,o){var n,a,r,c,s=o||t(top.document),i=this,u=i.width(),l=function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+top.document.body.scrollLeft-top.document.body.clientLeft,y:e.clientY+top.document.body.scrollTop-top.document.body.clientTop}},p=function(e){e=e||event;var t=l(e),o=top.document.body.clientWidth,s=r+t.x-n,p=c+t.y-a;p=p>600?600:p,p=0>p?0:p,s=s>o-u?o-u:s,s=0>s?0:s,i.css({left:s,top:p}),e.stopPropagation()};s.on("mouseup",function(){s.off("mousemove",p),i.css("opacity",1)}),t(e,i).on("mousedown",function(e){e=e||event;var t=l(e);return n=t.x,a=t.y,r=parseInt(i.css("left")),c=parseInt(i.css("top")),s.on("mousemove",p),i.css("opacity",.8),!1})},e.test=function(e,t){if(null==e||""==e||null==t||""==t)return!1;var o;switch(t){case"decimal":o=/^-?\d+(\.\d+)?$/g;break;case"int":o=/^[-+]?\d*$/;break;case"email":o=/[A-Za-z0-9_-]+[@](\S*)([A-Za-z0-9_-])(\S*)/g;break;case"mobile":o=/^1([3,5,8]\d|4[5,7])\d{8}$/g;break;case"areacode":o=/^0(10|2\d|[3-9]\d{2})$/g;break;case"phone":o=/^0(10\d{8}|2\d{9}|[3-9]\d{9,10})$/g;break;case"qq":o=/^\d{5,10}$/;break;case"ip":o=/^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])$/;break;case"url":o=/[http(s)?:\/\/]([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;break;case"domain":o=/^(https?:\/\/)?([a-z0-9\-]([a-z0-9\-]*[\.])+([a-z]{2,6}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))(\/)?$/;break;case"number":o=/^[-+]?\d*$/;break;case"letter":o=/^[a-zA-Z]\w*$/;break;case"alphanumeric":o=/\w/;break;case"username":o=/^[a-z][a-zA-Z0-9\_]+$/;break;case"chinese":o=/[\u4E00-\u9FFF]/;break;default:return!0}return null==e.match(o)?!1:!0},e.refreshPage=function(){window.location.href=window.location.href.replace(/\#([\s\S]+)?$/gi,"")})});