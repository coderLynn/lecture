Fengs.add("kdrj/spfl/cdity",function(s,i,t){var a={init:function(){var s=this,i=s.GetRequest("id"),t=i.id,a=i.sorts,l=20,d=i.is-1,c=i.js;console.log(a),s._datalist(d,c),s._cdity(a,t,l),s._sorts(l)},_datalist:function(s,a){var l="kd/product_type";t.s({url:l,type:"jsonp",data:{username:"junsheng@sududa.com","do":"all"},success:function(t){if(console.log(t),0!==t.sududa.all){var l=t.sududa.taobao.types.type;if(console.log(l),t.status&&-9==t.status)console.log("签名不能为空");else{var d="";i(".suofen").html(""),d='<div class="xunxg">                                    <a class="clr1">所有分类</a>                                    <i class="pot1"></i>                                    <a class="font">'+l[s].name+'</a>                                    <i class="pot2"></i>                                    <a class="font font-clr">'+l[s].list.l[a].n+'</a>                                    </div>                                            <div class="suofen-cots">                                            <div class="suofen-tltle">                                            <ul class="tltle-ul" id="submenu"></ul>                                            </div>                                            </div>                                            <div class="suofen-cont">                                            <div class="suofen-left fl">                                            <div class="kuais">                                            <h3>款式</h3>                                            <ul></ul>                                            </div>                                            <div class="caiz">                                            <h3>材质</h3>                                            <ul></ul>                                            </div>                                            <div class="fenge">                                            <h3>风格</h3>                                            <ul></ul>                                            </div>                                            </div>                                            <div class="suofen-right fr">                                            <div class="suofen-img">                                            <i><img src="'+l[s].list.l[a].g+'"></i>                                            </div>                                            </div>                                            </div>',i(".suofen").append(d),i.each(l[s].list.l,function(t,a){i(".tltle-ul").append('<li><a href="/spfl/cdity.jsp?id='+l[s].list.l[t].i+"&sorts=&is="+l[s].id+"&js="+t+'">'+a.n+"</a></li>")}),i(".tltle-ul li a").each(function(){$this=i(this),$this[0].href==String(window.location)&&$this.addClass("hover")});try{i.each(l[s].list.l[a].tags.tag[0].list.l,function(s,t){console.log(t),i(".kuais ul").append('<li><a href="javascript:void(0);" target="_blank">'+t.tn+"</a></li>")})}catch(c){i.each(l[s].list.l[a].tags.tag.list.l,function(s,t){console.log(t),i(".kuais ul").append('<li><a href="javascript:void(0);" target="_blank">'+t.tn+"</a></li>")})}try{i.each(l[s].list.l[a].tags.tag[1].list.l,function(s,t){i(".caiz ul").append('<li><a href="javascript:void(0);" target="_blank">'+t.tn+"</a></li>")})}catch(c){console.log(c)}try{i.each(l[s].list.l[a].tags.tag[2].list.l,function(s,t){i(".fenge ul").append('<li><a href="javascript:void(0);" target="_blank">'+t.tn+"</a></li>")})}catch(c){console.log(c)}}}},error:function(s){console.log(s)}})},_cdity:function(s,a,l){var d=this,c="kd/product_list";t.s({url:c,type:"jsonp",data:{username:"junsheng@sududa.com",line:l,"do":"type",param:a,sort:s},success:function(s){console.log(s);var t=s.sududa.list.l;i(".today-shangp").html("");for(var a=0;10>a;a++){t[a].style.li=""==t[a].style.li?[]:t[a].style.li,i.isArray(t[a].style.li)||(t[a].style.li=[t[a].style.li]);var c='<div class="today-commodity">                                <div class="today-commod1 fl">                                <i class="sels"></i>                                </div>                                <div class="today-commod2 fl">                                <dl class="fl">                                <dt>                                <img src="'+t[a].m+'" height="78" width="78">                                </dt>                                <dd class="today-dd1">                                <a href="javascript:void(0);">'+t[a].t+'</a>                                </dd>                                <dd class="today-dd2">                                <span class="fl">'+t[a].i+'</span>                                <a class="fl" href="javascript:void(0);" title=""></a>                                <i class="ic1 fl"></i>                                <i class="ic2 fl"></i>                                <i class="ic3 fl"></i>                                <i class="ic4 fl"></i>                                </dd>                                </dl>                                </div>                                <div class="today-commod3 fl">                                <div class="select-box fx-99">                                <dl class="more-select more-dl select-btn fl">                                <dt><i class="select-icon select-i fl"></i><span>'+t[a].style.li[0].b+'</span></dt>                                <dd>                                <ul>                                <li><a href="javascript:void(0);">颜色：白色条纹</a></li>                                <li><a href="javascript:void(0);">高中</a></li>                                <li><a href="javascript:void(0);">中专/技校</a></li>                                <li><a href="javascript:void(0);">大专</a></li>                                <li><a href="javascript:void(0);">本科</a></li>                                <li><a href="javascript:void(0);">硕士及以上</a></li>                                </ul>                                </dd>                                </dl>                                </div>                                </div>                                <div class="today-commod4 fl">                                <div class="heading-cont">                                <p><span>财富版：</span><i>¥</i><i class="font">'+t[a].style.li[0].c3+'</i></p>                                <p class="heading-c1"><span>高级版：</span><i>¥</i><i class="num font">'+t[a].style.li[0].c+'</i></p>                                <p><span>基础版：</span><i>¥</i> <i class="font">'+t[a].style.li[0].c2+'</i></p>                                </div>                                </div>                                <div class="today-commod5 fl">                                <div class="heading-shic">                                <p class="heading-tp"><i>¥</i> <i class="num">'+t[a].style.li[0].p+'</i></p>                                <p><i class="baoy">包邮</i></p>                                </div>                                </div>                                <div class="today-commod6 fl">                                <div class="heading-caig">                                <a href="javascript:void(0);">                                <i></i>                                <span>采购</span>                                </a>                                </div>                                </div>                                </div>';i(".today-shangp").append(c)}var o=s.sududa.count,e=s.sududa.all;d._page(o,e,l),i(".today-commodity .sels").bind("click",function(){i(this).parent().parent().toggleClass("select");var s=i(".today-commodity.select").length,t=i(".today-commodity").length;s===t?i(".slt-i").addClass("select"):i(".slt-i").removeClass("select")}),i(".slt-i").click(function(){i(this).hasClass("select")?(i(this).removeClass("select"),i(".today-commodity").removeClass("select")):(i(this).addClass("select"),i(".today-commodity").addClass("select"))}),i(".more-select").each(function(){var s=i(this).find("dt span"),t=i(this),a=parseInt(t.css("z-index")),l=i(this).children("dt"),d=i(this).children("dd"),c=function(i){i.stopPropagation(),d.slideDown(0),l.addClass("cur"),t.css("z-index",a+1),s.css("border","1px solid #cacaca")},o=function(i){i.stopPropagation(),d.slideUp(0),l.removeClass("cur"),t.css("z-index",a),s.css("border","1px solid #fff")},e=function(){i(".more-select").each(function(){i(this).find("dt").removeClass("cur"),i(this).find("dt span").css("border","1px solid #fff"),i(this).find("dl").css("z-index","0"),i(this).find("dd").hide(),i(this).removeAttr("style")})};l.click(function(s){s.stopPropagation(),d.is(":hidden")&&e(),d.is(":hidden")?c(s):o(s)}),i("html,body").click(function(s){s.stopPropagation(),e()}),d.find("a").click(function(){l.children("span").html(i(this).html()),o()})})},error:function(s){console.log(s)}})},_sorts:function(s){_this=this,i(".sort_b a").click(function(){i(this).toggleClass("cur").siblings().removeClass("cur"),sorts=i(this).data("sort");var t=_this.GetRequest("id");id=t.id,console.log(sorts),_this._cdity(sorts,id,s)})},GetRequest:function(){var s=location.search,i=new Object;if(-1!=s.indexOf("?")){var t=s.substr(1);strs=t.split("&");for(var a=0;a<strs.length;a++)i[strs[a].split("=")[0]]=unescape(strs[a].split("=")[1])}return i},_page:function(s,t,a){var l=parseInt(parseInt(s)/a);page=0==l?l:l+1,console.log(a),i(".slt-paging span i").first().text(page),i(".slt-text span i").first().text(s),i(".slt-text span i").last().text(t)}};a.init()},["kdrj/req","jquery/cookie","common/md5","kdrj/utils/popBox"]);