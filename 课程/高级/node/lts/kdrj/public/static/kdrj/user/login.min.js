Fengs.add("kdrj/user/login",function(o,e,r){var n={lguser:function(){function o(){var o="/es/login",n=e("#loginForm #l_username").val(),i=e("#loginForm #l_pass").val(),s=e(".sel_login").hasClass("sel"),t=r.pass(i);console.log(t),r.p({url:o,type:"jsonp",data:{username:n},p:t,success:function(o){if(1==o.sududa.status){if(1==s)var r=1;alert("登录成功！"),e.cookie("KD_USER",n,{path:"/"}),e.cookie("KD_PASS",t,{path:"/"}),e.cookie("AUTO_LOGIN",r,{path:"/"}),setTimeout(function(){window.location.href="/"},2e3)}else-9==o.sududa.status&&e("#error_login").show().find("#error_login_msg").text(o.sududa.tips)},error:function(o){console.log(o)}})}this.inptb=e("#l_username,#l_pass"),this.inptb.val("");var n=!1,i=!1,s={Email:/^[^\W|0]\w+@\w+(\.[a-z]{2,3}){1,2}$/},t={username:function(){var o=e("#l_username").val();""==o?(e("#error_login").show().find("#error_login_msg").text("邮箱不能为空！"),setTimeout(function(){e("#error_login").fadeOut(200)},2e3),n=!1,i=!1):o&&s.Email.test(o)?(i=!0,n=!0):(e("#error_login").show().find("#error_login_msg").text("邮箱填写错误！"),setTimeout(function(){e("#error_login").fadeOut(200)},2e3),i=!1,n=!1)},password:function(){var o=e("#l_pass").val();return o.length<6||o.length>12?(e("#error_login").show().find("#error_login_msg").text("密码6~16个字符，区分大小写！"),setTimeout(function(){e("#error_login").fadeOut(200)},2e3),n=!1,!1):(e("#error_login").hide().find("#error_login_msg").text("填写正确"),setTimeout(function(){e("#error_login").fadeOut(200)},2e3),n=!0,!0)}};e("#loginForm input[type='submit']").click(function(){t.username(),i&&t.password(),n&&o()})}};n.lguser()},["kdrj/req","jquery/cookie","common/md5"]);