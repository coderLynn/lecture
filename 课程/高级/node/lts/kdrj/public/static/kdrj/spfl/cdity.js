Fengs.add("kdrj/spfl/cdity",function(s,i,t){var l={init:function(){var s=this,t=s.GetRequest("id"),l=t.id,a=t.sorts,e=20,d=t.is-1,c=t.js,n=(t.count,t.all,n?i("#pages").find("ul li a").text():1);s._datalist(d,c),s._cdity(a,l,e,n),s._sorts(e),s._actionPage(a,l,e,n),s.pageclick()},_datalist:function(s,l){var a="kd/product_type";return t.s({url:a,type:"jsonp",data:{username:"junsheng@sududa.com","do":"all"},success:function(t){if(0!==t.sududa.all){var a=t.sududa.taobao.types.type;if(console.log(a),t.status&&-9==t.status)console.log("签名不能为空");else{var e="";i(".suofen").html(""),e='<div class="xunxg">                                    <a class="clr1">所有分类</a>                                    <i class="pot1"></i>                                    <a class="font">'+a[s].name+'</a>                                    <i class="pot2"></i>                                    <a class="font font-clr">'+a[s].list.l[l].n+'</a>                                    </div>                                            <div class="suofen-cots">                                            <div class="suofen-tltle">                                            <ul class="tltle-ul" id="submenu"></ul>                                            </div>                                            </div>                                            <div class="suofen-cont">                                            <div class="suofen-left fl">                                            <div class="kuais">                                            <h3>款式</h3>                                            <ul></ul>                                            </div>                                            <div class="caiz">                                            <h3>材质</h3>                                            <ul></ul>                                            </div>                                            <div class="fenge">                                            <h3>风格</h3>                                            <ul></ul>                                            </div>                                            </div>                                            <div class="suofen-right fr">                                            <div class="suofen-img">                                            <i><img src="'+a[s].list.l[l].g+'"></i>                                            </div>                                            </div>                                            </div>',i(".suofen").append(e),i.each(a[s].list.l,function(t,l){i(".tltle-ul").append('<li><a href="cdity?id='+a[s].list.l[t].i+"&sorts=&is="+a[s].id+"&js="+t+'">'+l.n+"</a></li>")}),i(".tltle-ul li a").each(function(){$this=i(this),$this[0].href==String(window.location)&&$this.addClass("hover")});try{i.each(a[s].list.l[l].tags.tag[0].list.l,function(t,l){i(".kuais ul").append('<li><a href="cdity?id='+a[s].list.l[t].i+"&sorts=&is="+a[s].id+"&js="+t+'" target="_blank">'+l.tn+"</a></li>")})}catch(d){i.each(a[s].list.l[l].tags.tag.list.l,function(t,l){i(".kuais ul").append('<li><a href="cdity?id='+a[s].list.l[t].i+"&sorts=&is="+a[s].id+"&js="+t+'" target="_blank">'+l.tn+"</a></li>")})}try{i.each(a[s].list.l[l].tags.tag[1].list.l,function(t,l){i(".caiz ul").append('<li><a href="cdity?id='+a[s].list.l[t].i+"&sorts=&is="+a[s].id+"&js="+t+'" target="_blank">'+l.tn+"</a></li>")})}catch(d){console.log(d)}try{i.each(a[s].list.l[l].tags.tag[2].list.l,function(t,l){i(".fenge ul").append('<li><a href="cdity?id='+a[s].list.l[t].i+"&sorts=&is="+a[s].id+"&js="+t+'" target="_blank">'+l.tn+"</a></li>")})}catch(d){console.log(d)}}}},error:function(s){console.log(s)}}),!1},_cdity:function(s,l,a,e){var d=this,c="kd/product_list";t.s({url:c,type:"jsonp",data:{username:"junsheng@sududa.com",line:a,"do":"type",param:l,sort:s,page:e},success:function(s){console.log(s);var t=s.sududa.list.l;i(".today-shangp").html("");for(var l=0;10>l;l++){t[l].style.li=""==t[l].style.li?[]:t[l].style.li,i.isArray(t[l].style.li)||(t[l].style.li=[t[l].style.li]);for(var e='<div class="today-commodity"><div class="today-commod1 fl"><i class="sels"></i></div><div class="today-commod2 fl"><dl class="fl"><dt><img src="'+t[l].m+'" height="78" width="78"></dt><dd class="today-dd1"><a href="javascript:void(0);">'+t[l].t+'</a></dd><dd class="today-dd2"><span class="fl">'+t[l].i+'</span><a class="fl" href="javascript:void(0);" title=""></a><i class="ic1 fl"></i><i class="ic2 fl"></i><i class="ic3 fl"></i><i class="ic4 fl"></i></dd></dl></div><div class="today-commod3 fl"><div class="select-box fx-99"><dl class="more-select more-dl select-btn fl"><dt><i class="select-icon select-i fl"></i><span>'+t[l].style.li[0].b+"</span></dt><dd><ul>",c=l;c<t[l].style.li.length;c++)e+=void 0==typeof t[l].style.li[c].b?'<li><a href="javascript:void(0);">如图色</a></li>':'<li><a href="javascript:void(0);">'+t[l].style.li[c].b+"</a></li>";e+='</ul></dd></dl></div></div><div class="today-commod4 fl"><div class="heading-cont"><p><span>财富版：</span><i>¥</i><i class="font">'+t[l].style.li[0].c3+'</i></p><p class="heading-c1"><span>高级版：</span><i>¥</i><i class="num font">'+t[l].style.li[0].c+'</i></p><p><span>基础版：</span><i>¥</i> <i class="font">'+t[l].style.li[0].c2+'</i></p></div></div><div class="today-commod5 fl"><div class="heading-shic"><p class="heading-tp"><i>¥</i> <i class="num">'+t[l].style.li[0].p+'</i></p><p><i class="baoy">包邮</i></p></div></div><div class="today-commod6 fl"><div class="heading-caig"><a href="javascript:void(0);"><i></i><span>采购</span></a></div></div></div>',i(".today-shangp").append(e)}var n=s.sududa.count,o=s.sududa.all;d._page(n,o,a),i(".today-commodity .sels").bind("click",function(){i(this).parent().parent().toggleClass("select");var s=i(".today-commodity.select").length,t=i(".today-commodity").length;s===t?i(".slt-i").addClass("select"):i(".slt-i").removeClass("select")}),i(".slt-i").click(function(){i(this).hasClass("select")?(i(this).removeClass("select"),i(".today-commodity").removeClass("select")):(i(this).addClass("select"),i(".today-commodity").addClass("select"))}),i(".more-select").each(function(){var s=i(this).find("dt span"),t=i(this),l=parseInt(t.css("z-index")),a=i(this).children("dt"),e=i(this).children("dd"),d=function(i){i.stopPropagation(),e.slideDown(0),a.addClass("cur"),t.css("z-index",l+1),s.css("border","1px solid #cacaca")},c=function(){e.slideUp(0),a.removeClass("cur"),t.css("z-index",l),s.css("border","1px solid #fff")},n=function(){i(".more-select").each(function(){i(this).find("dt").removeClass("cur"),i(this).find("dt span").css("border","1px solid #fff"),i(this).find("dl").css("z-index","0"),i(this).find("dd").hide(),i(this).removeAttr("style")})};a.unbind("click"),a.click(function(s){s.stopPropagation(),e.is(":hidden")&&n(),e.is(":hidden")?d(s):c()}),i("html,body").click(function(s){s.stopPropagation(),e.is(":hidden")||c()}),e.find("a").click(function(){a.children("span").html(i(this).html()),c()})})},error:function(s){console.log(s)}})},_sorts:function(s){_this=this,i(".sort_b a").click(function(){i(this).toggleClass("cur").siblings().removeClass("cur"),sorts=i(this).data("sort");var t=_this.GetRequest("id");id=t.id,console.log(sorts),_this._cdity(sorts,id,s)})},GetRequest:function(){var s=location.search,i=new Object;if(-1!=s.indexOf("?")){var t=s.substr(1);strs=t.split("&");for(var l=0;l<strs.length;l++)i[strs[l].split("=")[0]]=unescape(strs[l].split("=")[1])}return i},_page:function(s,t,l){var a=parseInt(parseInt(s)/l);if(page=0==a?a:a+1,i("#pages .more-select dd ul").html(""),page>80)var e=80;else var e=page;for(var d=1;e>d;d++)i("#pages .more-select dd ul").append("<li><a>"+d+"</a></li>");i("#pages .more-select dt").css({width:"60px"}),i(".slt-paging span i").first().text(page),i(".slt-text span i").first().text(s),i(".slt-text span i").last().text(t),this.pageclick()},_actionPage:function(s,t,l,a){var e=this,a=a;i(".pag1").unbind("click"),i(".pag1").click(function(d){return d.stopPropagation(),a>1?a--:a=1,e._cdity(s,t,l,a),i("#pages .more-select dt span").text(a),i(".slt-paging .fansir").text(a),!1}),i(".pag2").unbind("click"),i(".pag2").click(function(d){return d.stopPropagation(),a++,e._cdity(s,t,l,a),i("#pages .more-select dt span").text(a),!1})},pageclick:function(){{var s=_this.GetRequest("id"),t=s.id,l=s.sorts,a=20;s.is-1,s.js}i("#pages").find("ul li a").unbind("click"),i("#pages").find("ul li a").click(function(s){s.stopPropagation();var e=i(this).text();_this._cdity(l,t,a,e),_this._actionPage(l,t,a,e),i(".more-select").each(function(){var s=i(this).find("dt span"),t=i(this),l=parseInt(t.css("z-index")),a=i(this).children("dt"),e=i(this).children("dd"),d=function(i){i.stopPropagation(),e.slideDown(0),a.addClass("cur"),t.css("z-index",l+1),s.css("border","1px solid #cacaca")},c=function(){e.slideUp(0),a.removeClass("cur"),t.css("z-index",l),s.css("border","1px solid #fff")},n=function(){i(".more-select").each(function(){i(this).find("dt").removeClass("cur"),i(this).find("dt span").css("border","1px solid #fff"),i(this).find("dl").css("z-index","0"),i(this).find("dd").hide(),i(this).removeAttr("style")})};a.click(function(s){s.stopPropagation(),e.is(":hidden")&&n(),e.is(":hidden")?d(s):c()}),i("html,body").click(function(s){s.stopPropagation(),e.is(":hidden")||c()}),e.find("a").click(function(){a.children("span").html(i(this).html()),c()})})})}};l.init()},["kdrj/req","jquery/cookie","common/md5","kdrj/utils/popBox"]);